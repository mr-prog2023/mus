/* =============== أساسيات =============== */
:root {
    color-scheme: light dark; /* يحسن واجهات النظام */
}

*,
*::before,
*::after {
    box-sizing: border-box;
}

html, body {
    height: 100%;
}

body {
    font-family: 'Tajawal', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    margin: 0;
    min-height: 100vh;
    /* دعم safe areas في iPhone 15/16 */
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    background: var(--body-bg);
    transition: background .3s ease, color .2s ease;
    line-height: 1.6;
}

/* رابط تخطي للمحتوى لسهولة الوصول */
.skip-link.visually-hidden-focusable:focus {
    position: absolute;
    z-index: 1080;
    top: .5rem;
    inset-inline-start: .5rem;
    background: #000;
    color: #fff;
    padding: .5rem .75rem;
    border-radius: .5rem;
}

/* =============== ثيمات =============== */
.theme-1 {
    --body-bg: linear-gradient(135deg, #ffffff, #f1f3f5);
    --navbar-bg: linear-gradient(90deg, #2c3e50, #596a7b);
    --card-header-bg: linear-gradient(90deg, #3f618c, #5d8aa8);
    --text-color: #111;
    --navbar-type: dark;
    --dropdown-bg: #ffffff;
    --dropdown-color: #000000;
    --dropdown-hover-bg: #ececec;
    --dropdown-hover-color: #000000;
    --theme-color: #2c3e50;
}

.theme-2 {
    --body-bg: linear-gradient(135deg, #eefaff, #cce0ff);
    --navbar-bg: linear-gradient(90deg, #0077b6, #00b4d8);
    --card-header-bg: linear-gradient(90deg, #0096c7, #48cae4);
    --text-color: #111;
    --navbar-type: dark;
    --dropdown-bg: #ffffff;
    --dropdown-color: #000000;
    --dropdown-hover-bg: #e6f8ff;
    --dropdown-hover-color: #000000;
    --theme-color: #0077b6;
}

.theme-3 {
    --body-bg: linear-gradient(135deg, #f4fff7, #ddf5e2);
    --navbar-bg: linear-gradient(90deg, #188038, #34a853);
    --card-header-bg: linear-gradient(90deg, #1e8e3e, #4caf50);
    --text-color: #111;
    --navbar-type: dark;
    --dropdown-bg: #ffffff;
    --dropdown-color: #000000;
    --dropdown-hover-bg: #ecf7ee;
    --dropdown-hover-color: #000000;
    --theme-color: #188038;
}

.theme-4 {
    --body-bg: linear-gradient(135deg, #fff0ff, #ffe9fa);
    --navbar-bg: linear-gradient(90deg, #b347f6, #f72585);
    --card-header-bg: linear-gradient(90deg, #c340fd, #f054a9);
    --text-color: #111;
    --navbar-type: dark;
    --dropdown-bg: #ffffff;
    --dropdown-color: #000000;
    --dropdown-hover-bg: #ffe3f7;
    --dropdown-hover-color: #000000;
    --theme-color: #b347f6;
}

.theme-dark {
    --body-bg: #121212;
    --navbar-bg: #1f1f1f;
    --card-header-bg: #2d2d2d;
    --text-color: #efefef;
    --navbar-type: dark;
    --dropdown-bg: #333333;
    --dropdown-color: #ffffff;
    --dropdown-hover-bg: #444444;
    --dropdown-hover-color: #ffffff;
    --theme-color: #1f1f1f;
}

/* =============== شريط علوي وروابط =============== */
.navbar-custom {
    background: var(--navbar-bg) !important;
    transition: background .3s ease, color .2s ease;
}

    .navbar-custom .navbar-brand,
    .navbar-custom .btn,
    .navbar-custom .nav-link,
    .navbar-custom .navbar-toggler-icon {
        color: #fff !important;
    }

.bg-navbar-ghost {
    background: color-mix(in oklab, #000 10%, transparent);
}

/* Offcanvas: يملأ الشاشة على الموبايل */
.offcanvas {
    padding-bottom: env(safe-area-inset-bottom);
}

/* =============== بطاقات وأزرار =============== */
.card {
    border: none;
    border-radius: .9rem;
    box-shadow: 0 8px 24px rgba(0,0,0,.08);
    overflow: hidden;
}

.card-header {
    background: var(--card-header-bg);
    color: #fff;
    border: 0;
    text-align: center;
    padding: 1.1rem 1rem;
}

.btn-gradient {
    background: var(--card-header-bg);
    color: #fff;
    border: none;
    border-radius: .6rem;
    transition: transform .15s ease, box-shadow .2s ease, opacity .2s ease;
}

    .btn-gradient:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 14px rgba(0,0,0,.18);
    }

/* =============== الحاوية والمحتوى =============== */
.page-container {
    min-height: calc(100vh - 140px);
    display: block;
}

/* =============== Dropdowns =============== */
.navbar-custom .dropdown-menu {
    background-color: var(--dropdown-bg) !important;
    border-radius: .5rem !important;
    box-shadow: 0 12px 24px rgba(0,0,0,.18) !important;
}

.navbar-custom .dropdown-item {
    color: var(--dropdown-color) !important;
}

    .navbar-custom .dropdown-item:hover,
    .navbar-custom .dropdown-item:focus,
    .navbar-custom .dropdown-item.active {
        background-color: var(--dropdown-hover-bg) !important;
        color: var(--dropdown-hover-color) !important;
    }

/* =============== روابط nav-pills =============== */
.nav-pills .nav-link {
    border-radius: .6rem;
    color: #fff;
    background: transparent;
    border: 1px solid rgb(255 255 255 / .25);
}

    .nav-pills .nav-link:hover {
        background: rgb(255 255 255 / .1);
    }

    .nav-pills .nav-link.active {
        background: rgb(255 255 255 / .25);
    }

/* =============== Responsive تحسينات =============== */
@media (max-width: 576px) {
    .nav-pills {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

        .nav-pills .nav-item {
            flex: 0 0 auto;
        }

        .nav-pills .nav-link {
            white-space: nowrap;
            padding: .45rem .7rem;
            font-size: .9rem;
        }
}

/* تقليل الحركة لذوي الحساسية */
@media (prefers-reduced-motion: reduce) {
    * {
        transition: none !important;
        animation-duration: .01ms !important;
    }
}

/* طباعة نظيفة */
@media print {
    .navbar, .offcanvas, .bg-navbar-ghost, footer {
        display: none !important;
    }

    body {
        background: #fff !important;
    }
}

/* ألوان النص الافتراضية بحسب الثيم */
body {
    color: var(--text-color);
}
